this.HS=this.HS||{},function(){function t(){S=io('http://localhost:3000'),G=new createjs.Stage('battlefield'),G.enableMouseOver(10),createjs.Touch.enable(G);let v=HS.BGM;v.start(),S.on('connect',function(){HS.MessageBox.hide()}),S.on('connect',function(){HS.MessageBox.hide()}),S.on('connect_error',function(){HS.MessageBox.show('\u9023\u7DDA\u4E2D...')}),S.on('connecting',function(){HS.MessageBox.show('\u9023\u7DDA\u4E2D...')}),S.on('disconnect',function(){HS.MessageBox.show('\u9023\u7DDA\u4E2D\u65B7'),m=null,T.visible=!0,A.visible=!1}),S.on('match',function(F){d(F)}),A=new HS.BattleField,A.x=HS.Global.battleFieldX,A.y=HS.Global.battleFieldY,G.addChild(A),A.visible=!1,A.onendturn(()=>{g()}),T=G.addChild(new HS.MatchScreen),T.onmatch(F=>{v.buttonClick(),S.emit('dual',new HS.Action.Dual(F.id)),HS.MessageBox.show('\u914D\u5C0D\u4E2D...')}),S.on('dual',function(F){r(F)}),createjs.Ticker.addEventListener('tick',l),createjs.Ticker.setFPS(63),createjs.Ticker.framerate=63,fpsLabel=new createjs.Text('-- fps','bold 18px Arial','#0F0'),G.addChild(fpsLabel),fpsLabel.x=10,fpsLabel.y=10,f=new HS.ArrowsManager,f.handle(G,A),f.onassign((F,B)=>{console.log(new HS.Action.Attack(F.information.id,B.information.id)),S.emit('match',new HS.Action.Attack(F.information.id,B.information.id))}),G.addChild(HS.AlertBox),G.addChild(HS.MessageBox)}function l(v){G.update(),fpsLabel.text='\u6E2C\u8A66\u7248 v0.2018061901\n\u89E3\u6790\u5EA6 '+HS.Global.width+' x '+HS.Global.height+'\n'+Math.round(createjs.Ticker.getMeasuredFPS())+' fps',!v.paused}function r(v){switch(console.log(v),v.type){case HS.Action.Type.Setting:HS.MessageBox.show('\u914D\u5C0D\u6210\u529F'),m=v.player,T.visible=!1,A.clear(),A.visible=!0,HS.MessageBox.hide();break;case HS.Action.Type.Disconnect:HS.Alert('\u5C0D\u624B\u96E2\u958B'),m=null,T.visible=!0,A.visible=!1;break;case HS.Action.Type.EndGame:v.player==m?HS.Anime.disappear(A.selfHero,()=>{HS.Alert('\u5931\u6557'),setTimeout(()=>{m=null,T.visible=!0,A.visible=!1},1500)}):HS.Anime.disappear(A.opponentHero,()=>{HS.Alert('\u52DD\u5229'),setTimeout(()=>{m=null,T.visible=!0,A.visible=!1},1500)});}}function d(v){switch(console.log(v),v.type){case HS.Action.Type.Setting:o(v);break;case HS.Action.Type.Drainage:n(v);break;case HS.Action.Type.Endturn:p(v);break;case HS.Action.Type.Discard:s(v);break;case HS.Action.Type.Start:C(v);break;case HS.Action.Type.Battlefield:b(v);break;case HS.Action.Type.Hero:H(v);break;case HS.Action.Type.battleCry:u(v);}}function o(v){m=v.player}function n(v){if(k=v.id,m===v.player){if(!v.obj||!v.obj.cards)return;HS.Alert('\u62BD\u724C('+v.obj.number+')'),v.obj.cards.forEach(F=>{let B=HS.CardFactory.create(F.name,F.cardID);B.atk=F.originAtk,B.def=F.originDef,B.cost=F.cost,B.moveable=!0,B.name=F.name,F.cost<=A.selfHero.crystal&&(B.active=!0),A.selfHandArea.addCard(B),B.onmoving=function(D){HS.Method.isSelfBattleArea(D.stageX,D.stageY)?A.selfBattleArea.relocate(B.getStageX()):A.selfBattleArea.relocate()},B.onmoved=function(D){HS.Method.isSelfBattleArea(D.stageX,D.stageY)&&c(D)}}),A.selfHero.rc=v.obj.rc}else{HS.Alert('\u5C0D\u65B9\u62BD\u724C('+v.obj.number+')');for(let B,F=0;F<v.obj.number;F++)B=new HS.Card(-1),B.isCardBack=!0,A.opponentHandArea.addCard(B);A.opponentHero.rc=v.obj.rc}}function c(v){if(7<=A.selfBattleArea.cards.length)return void A.selfBattleArea.relocate();let F=v.currentTarget;console.log(new HS.Action.PlayCard(F.information.id,A.selfBattleArea.getInsertIndex(v.stageX))),S.emit('match',new HS.Action.PlayCard(F.information.id,A.selfBattleArea.getInsertIndex(v.stageX)))}function s(v){if(v.obj){let F=v.obj.card;if(v.player==m&&F){let B=A.findCardWithId(F.cardID);A.selfHero.cristal=v.obj.crystal,B&&(A.selfHandArea.removeCard(B),A.selfBattleArea.addCard(B,v.obj.position),B.cost=F.cost,B.atk=F.newAtk,B.def=F.newDef,B.moveable=!1,B.assignable=!0,B.active=F.attackable,B.yield()),A.selfHandArea.cards.forEach(D=>{D.active=!!(D.cost<=A.selfHero.crystal)})}else if(v.player!=m&&F){let B=A.findCardWithId(-1);A.opponentHandArea.removeCard(B),A.opponentHero.cristal=v.obj.crystal,B&&(B=HS.CardFactory.create(F.name,F.cardID),B.cost=F.cost,B.atk=F.newAtk,B.def=F.newDef,B.name=F.name,B.moveable=!1,B.assignable=!1,B.yield(),A.opponentBattleArea.addCard(B,F.position))}}}function C(v){v.player==m?(HS.Alert('\u4F60\u7684\u56DE\u5408'),A.btn.enable=!0,A.selfHero.cristal=v.obj.crystal,A.setTimer(()=>{g()},60),A.selfHandArea.cards.forEach(F=>{F.active=!!(F.cost<=A.selfHero.crystal)}),A.selfBattleArea.cards.forEach(F=>{F.active=!0})):(HS.Alert('\u5C0D\u65B9\u7684\u56DE\u5408'),A.btn.enable=!1,A.opponentHero.cristal=v.obj.crystal,A.selfHandArea.cards.forEach(F=>{F.active=!1}),A.selfBattleArea.cards.forEach(F=>{F.active=!1}))}function p(){console.log({type:HS.Action.endturn,msg:'\u7D50\u675F\u56DE\u5408'}),S.emit('match',{type:HS.Action.endturn,msg:'\u7D50\u675F\u56DE\u5408'})}function g(){S.emit('match',new HS.Action.EndTurn),A.stopTimer()}function b(v){if(v){let F=A.findCardWithId(v.from),B=A.findCardWithId(v.to);F&&B?HS.Anime.attack(F,B,()=>{v.obj.cards.forEach(D=>{let W=A.findCardWithId(D.cardID);W&&0>=D.newDef&&A.removeCard(W)}),v.obj.cards.forEach(D=>{let W=A.findCardWithId(D.cardID);W&&(W.atk=D.newAtk,W.def=D.newDef,W.cost=D.cost,W.active=D.attackable)})}):v.obj&&v.obj.cards&&(v.obj.cards.forEach(D=>{let W=A.findCardWithId(D.cardID);W&&0>=D.newDef&&A.removeCard(W)}),v.obj.cards.forEach(D=>{let W=A.findCardWithId(D.cardID);W&&(W.atk=D.newAtk,W.def=D.newDef,W.cost=D.cost,W.active=D.attackable)}))}}function H(v){v.player==m?(A.selfHero.information.id=v.obj.cardID,A.selfHero.hp=v.obj.newDef):v.player!=m&&(A.opponentHero.information.id=v.obj.cardID,A.opponentHero.hp=v.obj.newDef)}function u(v){if(v.obj&&v.obj.cards){let F=A.findCardWithId(v.from);v.obj.cards.forEach(B=>{F.battleCry();let D=A.findCardWithId(B.cardID),W=HS.Global.Source.getResult('FireBall');D&&HS.Anime.itemAttack(F,D,W,()=>{D.atk=B.newAtk,D.def=B.newDef,D.cost=B.cost,D.active=B.attackable,D&&0>=B.newDef&&A.removeCard(D)})})}}let S,A,T,G,m;var f;HS.Core=function(){return{start:t}};let k=0}();function extend(a,t){a.prototype.__proto__=t.prototype}(function(){HS.Action={setting:0,drainage:1,discard:2,endturn:0}})();this.HS=this.HS||{},function(){function a(t,l){let r=t,d=l;const o=0.09*r,n=0.21*d,c=1,s=1,C=0.45,p=0.55,b=parseInt(r*(1-c)),H=parseInt(d*(1-s)),u=parseInt(r*c),S=parseInt(d*s);return{resize:function(A,T){HS.Global=a(A,T),console.log(HS.Global)},focusing:void 0,width:r,height:d,battleFieldX:b,battleFieldWidth:u,battleFieldY:H,battleFieldHeight:S,cardWidth:o,cardHeight:n,TextFontVerySmall:85*(r/1920)+'% Warnock',TextFontSmall:100*(r/1920)+'% Warnock',TextFont:160*(r/1920)+'% Warnock',TextFontLarge:180*(r/1920)+'% Warnock',TextFontVeryLarge:210*(r/1920)+'% Warnock',TextFontHuge:400*(r/1920)+'% Warnock',TextFontVeryHuge:750*(r/1920)+'% Warnock',outline:5*(r/1920),cardCostTextX:0.15*o,cardCostTextY:0.115*n,cardAtkTextX:0.15*o,cardAtkTextY:0.89*n,cardDefTextX:0.87*o,cardDefTextY:0.89*n,cardNameTextX:0.58*o,cardNameTextY:0.53*n,cardNameScale:r/1920,ellipseStickerX:0.2*o,ellipseStickerY:0.07*n,ellipseStickerW:0.6*o,ellipseStickerH:0.55*n,handCardDistance:parseInt(u/11.5),battleAreaCardDistance:parseInt(u/10),opponentHandAreaY:parseInt(H),opponentBattleAreaY:parseInt(C/2*S+H),selfBattleAreaY:parseInt((C/2+p/2)*S+H),selfHandAreaY:parseInt((C/2+p)*S+H),handAreaWidth:u,handAreaHeight:parseInt(d*C/2),battleAreaWidth:u,battleAreaHeight:parseInt(d*p/2),buttonWidth:0.06*r,buttonHeight:0.03*r,alertWidth:0.4*r,alertHeight:0.2*d,deckWidth:0.07*r,deckHeight:0.2*d,rate:r/1920,imagePackageWidth:0.05*r,imagePackageHeight:0.05*r}}HS.Global=a(3840,2160)}();this.HS=this.HS||{},function(){function t(l,r){return HS.Global.selfBattleAreaY<r&&HS.Global.selfHandAreaY>r&&HS.Global.battleFieldX<l&&HS.Global.width>l}HS.Method=function(){return{isSelfBattleArea:t}}()}(),this.HS=this.HS||{},function(){function a(){createjs.Container.call(this);let r=new createjs.Shape;r.graphics.beginFill('#5C6BC0').drawRect(0,0,HS.Global.width,HS.Global.height),r.alpha=0.95;let d=HS.Global.Source.getResult('MatchBackground'),o=new createjs.Shape;o.graphics.beginBitmapFill(d).drawRect(0,0,d.width,d.height),o.regX=d.width/2,o.regY=d.height/2,o.x=HS.Global.width/2,o.y=HS.Global.height/2,o.scaleX=o.scaleY=0.5*(HS.Global.width/d.width);let n=new createjs.Text('Heart Stone',HS.Global.TextFontVeryHuge,'#E8EAF6');n.set({textAlign:'center',x:0.5*HS.Global.width,y:0.1*HS.Global.height});let c=n.clone();c.set({textAlign:'center',color:'#616161',outline:HS.Global.outline+5});let s=new t('\u958B\u59CB\u914D\u5C0D'),C=new HS.Deck;s.x=HS.Global.width/2-s.width/2,s.y=0.8*HS.Global.height,s.addEventListener('click',()=>{this._onmatch&&this._onmatch(C.getSelected())}),C.x=HS.Global.width/2,C.y=0.5*HS.Global.height,this.addChild(o),this.addChild(r),l(this),this.addChild(c),this.addChild(n),this.addChild(C),this.addChild(s),HS.Alert('\u6B61\u8FCE\u4F86\u5230\u5FC3\u306E\u77F3\u7684\u4E16\u754C'),createjs.Ticker.addEventListener('tick',()=>{o.rotation+=0.05}),this.onmatch=p=>{this._onmatch=p}}function t(r){createjs.Container.call(this);let d=0.3*HS.Global.width,o=0.1*HS.Global.height,n='#3949AB';this.width=d,this.height=o,this.background=new createjs.Shape,this.background.graphics.beginFill(n).drawRoundRect(0,0,d,o,10),this.background.alpha=0.9;let s=new createjs.Text(r,HS.Global.TextFontHuge,'#fff');s.set({textBaseline:'middle',textAlign:'center',x:d/2,y:o/2,alpha:0.9});let C=s.clone();C.set({color:'#616161',outline:HS.Global.outline+3}),this.addChild(this.background),this.addChild(this.textOutLine),this.addChild(s),this.on('mousedown',()=>{this.enable&&this.background.graphics.clear().beginFill('#3F51B5').drawRoundRect(0,0,d,o,10)}),this.on('click',()=>{this.enable&&this.background.graphics.clear().beginFill(n).drawRoundRect(0,0,d,o,10)}),this.on('mouseout',()=>{this.enable&&this.background.graphics.clear().beginFill(n).drawRoundRect(0,0,d,o,10)}),this.enable=!0}function l(r){let d=new createjs.Container;d.x=HS.Global.width/2,d.y=HS.Global.height/2,r.addChild(d),createjs.Ticker.addEventListener('tick',()=>{if(d.rotation+=0.03,d.children.forEach(c=>{c.y+=c.ySpeed+0.1*Math.random(),c.x+=c.xSpeed+0.1*Math.random(),c.alpha=0.2*Math.sin(0.017453293*(360*c.alpha+5))+0.25,(-c.x>d.x||-c.y>d.x||c.y>d.x||c.x>d.x||1e-4>Math.random())&&(c.y=0,c.x=0)}),750>d.children.length){var n=new createjs.Shape;n.alpha=Math.random(),n.graphics.clear().beginFill('#FFF').drawCircle(0,0,(3*Math.random()+1)*HS.Global.rate),n.x=(Math.random()-0.5)*HS.Global.deckWidth,n.y=(Math.random()-0.5)*HS.Global.deckWidth,n.xSpeed=0.5*(Math.random()-0.5)*HS.Global.rate,n.ySpeed=0.5*(Math.random()-0.5)*HS.Global.rate,d.addChild(n)}})}extend(t,createjs.Container),extend(a,createjs.Container),HS.MatchScreen=a}();this.HS=this.HS||{},function(){function a(b,H,u){createjs.Container.call(this),this.sticker=new createjs.Shape,this.information={},this.information.id=b,image=HS.Global.Source.getResult(H),image?(image.scaleX=HS.Global.ellipseStickerW/image.width,image.scaleY=HS.Global.ellipseStickerH/image.height,this.sticker.x=HS.Global.ellipseStickerX,this.sticker.y=HS.Global.ellipseStickerY,this.sticker.graphics.clear().beginBitmapFill(image,'no-repeat',u).drawEllipse(0,0,HS.Global.ellipseStickerW,HS.Global.ellipseStickerH)):(this.sticker.x=HS.Global.ellipseStickerX,this.sticker.y=HS.Global.ellipseStickerY,this.sticker.graphics.clear().beginFill('#1565C0').drawEllipse(0,0,HS.Global.ellipseStickerW,HS.Global.ellipseStickerH)),this.on('rollover',A=>{this.moveable&&this.active&&n(A)}),this.on('rollout',A=>{this.moveable&&this.active&&c(A)}),this.on('pressmove',A=>{this.moveable&&this.active&&l(A)}),this.on('pressup',A=>{this.moveable&&this.active&&r(A)}),this.on('mousedown',A=>{this.moveable&&this.active&&d(A)});let S=HS.Global.Source.getResult('CardTemplate');this.template=new createjs.Shape,this.template.graphics.beginBitmapFill(S,null,!0,!1).drawRect(0,0,S.width,S.height).endFill(),this.template.scaleX=HS.Global.cardWidth/S.width,this.template.scaleY=HS.Global.cardHeight/S.height,this.costText=new createjs.Text('5',HS.Global.TextFontLarge,'#fff'),this.costText.set({textAlign:'center',x:HS.Global.cardCostTextX,y:HS.Global.cardCostTextY,outline:!1}),this.costTextOutline=new createjs.Text('5',HS.Global.TextFontLarge,'#20120c'),this.costTextOutline.set({textAlign:'center',x:HS.Global.cardCostTextX,y:HS.Global.cardCostTextY,outline:HS.Global.outline}),this.atkText=new createjs.Text('15',HS.Global.TextFont,'#FFF'),this.atkText.set({textAlign:'center',x:HS.Global.cardAtkTextX,y:HS.Global.cardAtkTextY}),this.atkTextOutline=new createjs.Text('15',HS.Global.TextFont,'#20120c'),this.atkTextOutline.set({textAlign:'center',x:HS.Global.cardAtkTextX,y:HS.Global.cardAtkTextY,outline:HS.Global.outline}),this.defText=new createjs.Text('15',HS.Global.TextFont,'#fff'),this.defText.set({textAlign:'center',x:HS.Global.cardDefTextX,y:HS.Global.cardDefTextY,outline:!1}),this.defTextOutline=new createjs.Text('15',HS.Global.TextFont,'#20120c'),this.defTextOutline.set({textAlign:'center',x:HS.Global.cardDefTextX,y:HS.Global.cardDefTextY,outline:HS.Global.outline}),this.cardName=new createjs.Container,this.activeShape=new createjs.Shape,this.activeShape.graphics.setStrokeStyle(8*HS.Global.rate).beginStroke('#7CB342').drawRoundRect(0.05*HS.Global.cardWidth,0.1*HS.Global.cardHeight,0.9*HS.Global.cardWidth,0.9*HS.Global.cardHeight,22),this.cardContent=new createjs.Container,this.addChild(this.activeShape),this.addChild(this.sticker),this.addChild(this.template),this.addChild(this.costTextOutline),this.addChild(this.costText),this.addChild(this.atkTextOutline),this.addChild(this.atkText),this.addChild(this.defTextOutline),this.addChild(this.defText),this.addChild(this.cardContent),this.addChild(this.cardName),this.snapToPixel=!0,this.active=!1}function t(b,...H){return function(u){H.forEach(S=>S.text=u)}}function l(b){let H=o(b.currentTarget,'x');b.currentTarget.set({x:b.stageX-H-HS.Global.cardWidth/2,y:b.stageY-b.currentTarget.parent.y-HS.Global.cardHeight/2}),b.currentTarget.onmoving&&b.currentTarget.onmoving(b)}function r(b){b.currentTarget.set({x:b.currentTarget.fixX,y:b.currentTarget.fixY,scaleX:1,scaleY:1}),b.currentTarget.onmoved&&b.currentTarget.onmoved(b)}function d(b){b.currentTarget.fixX=b.currentTarget.x,b.currentTarget.fixY=b.currentTarget.y}function o(b,H){return b.parent?b.parent[H]+o(b.parent,H):0}function n(b){b.currentTarget.scaleX*=1.045,b.currentTarget.scaleY*=1.045,b.currentTarget.toTop()}function c(b){b.currentTarget.scaleX=1,b.currentTarget.scaleY=1}function p(b){return function(H){if(H)for(let u=0;u<H.length;u++){let S=17*(H.length/2-u)*HS.Global.cardNameScale,A=6.5*-Math.sin(0.4*u)*HS.Global.cardNameScale,T=new createjs.Text(H.charAt(u),HS.Global.TextFontSmall,'#fff');T.set({textAlign:'center',x:HS.Global.cardNameTextX-S,y:HS.Global.cardNameTextY+A,outline:!1});let G=new createjs.Text(H.charAt(u),HS.Global.TextFontSmall,'#20120c');G.set({textAlign:'center',x:HS.Global.cardNameTextX-S,y:HS.Global.cardNameTextY+A,outline:HS.Global.outline}),b.cardName.addChild(G,T)}}}function g(b){return function(H){b.isActive=H,b.activeShape.alpha=b.isActive?0.85:0}}a.prototype={moveable:!0,onmoving:void 0,onmoved:void 0,fixX:0,fixY:0,information:void 0,getStageX:function(){return o(this,'x')+this.x},getStageY:function(){return o(this,'y')+this.y},set atk(b){t(this,this.atkTextOutline,this.atkText)(b)},set cost(b){this._cost=b,t(this,this.costTextOutline,this.costText)(b)},get cost(){return this._cost},set def(b){t(this,this.defTextOutline,this.defText)(b)},set name(b){p(this)(b)},set active(b){g(this)(b)},get active(){return this.isActive},set isCardBack(b){if(this._isCardBack=b,this._isCardBack){let H=HS.Global.Source.getResult('CardBack');this.active=!1,this.sticker.visible=!1,this.defTextOutline.visible=!1,this.atkTextOutline.visible=!1,H?(this.template.graphics.clear().beginBitmapFill(H,null,!0,!1).drawRect(0,0,H.width,H.height).endFill(),this.template.scaleX=HS.Global.cardWidth/H.width,this.template.scaleY=HS.Global.cardHeight/H.height):this.sticker.graphics.beginFill('#1565C0').drawRoundRect(0,0,HS.Global.cardWidth,HS.Global.cardHeight,2),this.setChildIndex(this.template,this.getNumChildren()-1)}},assignable:!1,toTop:function(){this.parent.parent.setChildIndex(this.parent,this.parent.parent.getNumChildren()-3),this.parent.setChildIndex(this,this.parent.getNumChildren()-1)},set content(b){let H=new createjs.Text(b,HS.Global.TextFontVerySmall,'#fff');H.set({textAlign:'left',x:0.2*HS.Global.cardWidth,y:0.7*HS.Global.cardHeight,outline:!1,lineWidth:0.63*HS.Global.cardWidth,maxWidth:0.63*HS.Global.cardWidth});let u=H.clone();u.set({color:'#20120c',outline:HS.Global.outline-1}),this.cardContent.removeAllChildren(),this.cardContent.addChild(u),this.cardContent.addChild(H)},battleCry:function(){HS.BGM.play('launcher')},yield:function(){HS.BGM.play('playcard')}},extend(a,createjs.Container),HS.Card=a}();this.HS=this.HS||{},function(){function a(){this._hp=0,this.cristalList=[],this.information={},createjs.Container.call(this);let t=new createjs.Shape;templateImage=HS.Global.Source.getResult('HeroTemplate'),t.graphics.beginBitmapFill(templateImage,'no-repeat',!0,!1).drawRect(0,0,templateImage.width,templateImage.height),t.scaleY=t.scaleX=1.5*HS.Global.handCardDistance/templateImage.width,this.addChild(t),createjs.Ticker.addEventListener('tick',l=>{!l.paused&&this.cristalList.length&&this.cristalList.forEach(r=>{r.rotation+=1*(60/createjs.Ticker.getMeasuredFPS())})}),this.hpText=new createjs.Text('HP: ',HS.Global.TextFont,'#E57373'),this.hpText.set({textAlign:'left',x:0.55*HS.Global.handCardDistance,y:0.5*HS.Global.handCardDistance,outline:!1}),this.hpTextOutLine=new createjs.Text('HP: ',HS.Global.TextFont,'#B71C1C'),this.hpTextOutLine.set({textAlign:'left',x:0.55*HS.Global.handCardDistance,y:0.5*HS.Global.handCardDistance,outline:HS.Global.outline-1}),this.mpText=new createjs.Text('MP: ',HS.Global.TextFont,'#64B5F6'),this.mpText.set({textAlign:'left',x:0.55*HS.Global.handCardDistance,y:0.7*HS.Global.handCardDistance,outline:!1}),this.mpTextOutLine=new createjs.Text('MP: ',HS.Global.TextFont,'#0D47A1'),this.mpTextOutLine.set({textAlign:'left',x:0.55*HS.Global.handCardDistance,y:0.7*HS.Global.handCardDistance,outline:HS.Global.outline-1}),this.rcText=new createjs.Text('RC: ',HS.Global.TextFont,'#BCAAA4'),this.rcText.set({textAlign:'left',x:0.55*HS.Global.handCardDistance,y:0.9*HS.Global.handCardDistance,outline:!1}),this.rcTextOutLine=new createjs.Text('RC: ',HS.Global.TextFont,'#0D47A1'),this.rcTextOutLine.set({textAlign:'left',x:0.55*HS.Global.handCardDistance,y:0.9*HS.Global.handCardDistance,outline:HS.Global.outline-1}),this.addChild(this.hpTextOutLine),this.addChild(this.hpText),this.addChild(this.mpTextOutLine),this.addChild(this.mpText),this.addChild(this.rcTextOutLine),this.addChild(this.rcText),this.cristal=0,this.hp=40}a.prototype={set hp(t){this._hp=t,this.hpTextOutLine.text=this.hpText.text='HP: '+t},set def(t){this.hp=t},get def(){return this.hp},set cristal(t){this._crystal=t,this.cristalList.forEach(o=>{this.removeChild(o)}),this.cristalList=[],this.mpTextOutLine.text=this.mpText.text='MP: '+t;let l=1.5*HS.Global.handCardDistance/2,r=1.5*HS.Global.handCardDistance/2;for(let n,o=0;o<t;o++)n=new createjs.Shape,n.graphics.beginFill('#0288D1').drawPolyStar(HS.Global.handCardDistance,HS.Global.handCardDistance,HS.Global.handCardDistance/4,9,0.3,0),n.scaleX=0.42,n.scaleY=0.42,n.x=l,n.y=r,n.rotation=360/t*o,this.cristalList.push(n),this.addChild(n)},get crystal(){return this._crystal},set rc(t){this._rc=t,this.rcTextOutLine.text=this.rcText.text='RC: '+t}},extend(a,createjs.Container),HS.Hero=a}();this.HS=this.HS||{},function(){function a(){createjs.Container.call(this),d=new createjs.Container,this.addChild(d),t(),this.opponentHandArea=new HS.HandArea,this.opponentHandArea.alpha=1,this.opponentHandArea.x=0,this.opponentHandArea.y=HS.Global.opponentHandAreaY,this.addChild(this.opponentHandArea),this.opponentBattleArea=new HS.BattleArea,this.opponentBattleArea.x=0,this.opponentBattleArea.y=HS.Global.opponentBattleAreaY,this.addChild(this.opponentBattleArea),this.selfBattleArea=new HS.BattleArea,this.selfBattleArea.x=0,this.selfBattleArea.y=HS.Global.selfBattleAreaY,this.addChild(this.selfBattleArea),this.selfHandArea=new HS.HandArea,this.selfHandArea.x=0,this.selfHandArea.y=HS.Global.selfHandAreaY,this.addChild(this.selfHandArea),this.opponentHandArea.alpha=this.selfHandArea.alpha=0.98,this.selfBattleArea.alpha=this.opponentBattleArea.alpha=0.95,this.opponentHero=new HS.Hero,this.opponentHandArea.hero=this.opponentHero,this.selfHero=new HS.Hero,this.selfHandArea.hero=this.selfHero,this.btn=new HS.Button('\u7D50\u675F\u56DE\u5408'),this.btn.x=HS.Global.battleAreaWidth-HS.Global.buttonWidth,this.btn.y=HS.Global.selfBattleAreaY-HS.Global.buttonHeight/2,this.addChild(this.btn),this.onendturn=c=>{this.btn.onclick(()=>{c()})},this.clear=l,this.findCard=c=>{for(let p,C=0;C<this.selfBattleArea.cards.length;C++)if(p=c.localToLocal(0,0,this.selfBattleArea.cards[C]),this.selfBattleArea.cards[C].hitTest(p.x,p.y))return this.selfBattleArea.cards[C];for(let p,C=0;C<this.opponentBattleArea.cards.length;C++)if(p=c.localToLocal(0,0,this.opponentBattleArea.cards[C]),this.opponentBattleArea.cards[C].hitTest(p.x,p.y))return this.opponentBattleArea.cards[C];let s=c.localToLocal(0,0,this.opponentHero);return this.opponentHero.hitTest(s.x,s.y)?this.opponentHero:(s=c.localToLocal(0,0,this.selfHero),this.selfHero.hitTest(s.x,s.y))?this.selfHero:void 0},this.removeCard=c=>{return this.selfBattleArea.removeCard(c)||this.opponentBattleArea.removeCard(c)||this.selfHandArea.removeCard(c)||this.opponentHandArea.removeCard(c)},this.findCardWithId=c=>{for(let s=0;s<this.selfBattleArea.cards.length;s++)if(this.selfBattleArea.cards[s].information.id==c)return this.selfBattleArea.cards[s];for(let s=0;s<this.selfHandArea.cards.length;s++)if(this.selfHandArea.cards[s].information.id==c)return this.selfHandArea.cards[s];for(let s=0;s<this.opponentBattleArea.cards.length;s++)if(this.opponentBattleArea.cards[s].information.id==c)return this.opponentBattleArea.cards[s];for(let s=0;s<this.opponentHandArea.cards.length;s++)if(this.opponentHandArea.cards[s].information.id==c)return this.opponentHandArea.cards[s];return this.opponentHero.information.id==c?this.opponentHero:this.selfHero.information.id==c?this.selfHero:void 0};let o=new createjs.Shape;o.x=this.btn.x-38*HS.Global.rate,o.y=this.btn.y+0.25*HS.Global.buttonHeight,o.scaleX=HS.Global.rate,o.scaleY=HS.Global.rate,this.addChild(o);let n;this.setTimer=(c,s)=>{s*=1e3,now=new Date,o.visible=!0,n=createjs.Ticker.addEventListener('tick',()=>{let C=new Date().getTime()-now.getTime(),p=360-360*(C/s);o.graphics.clear().beginFill('#5C6BC0').arc(15,15,15,0,p*(Math.PI/180),!1).lineTo(15,15).closePath(),C>s&&(createjs.Ticker.removeEventListener('tick',n),o.visible=!1,c&&c())})},this.stopTimer=()=>{createjs.Ticker.removeEventListener('tick',n),o.visible=!1}}function t(){let o=HS.Global.Source.getResult('Background'),n=new createjs.Shape;n.graphics.beginBitmapFill(o,null,!0,!1).drawRect(0,0,o.width,o.height).endFill(),n.x=o.width/2,n.scaleY=n.scaleX=0.33*HS.Global.width/o.width,n.snapToPixel=!0,n.cache(0,0,o.width,o.height),n.y=o.height/2,n.regX=o.width/2,n.regY=o.height/2;let c=n.clone();c.x=HS.Global.width-o.width/2,c.y=HS.Global.height-o.height/2,o=HS.Global.Source.getResult('Background2');let s=new createjs.Shape;s.graphics.beginBitmapFill(o,null,!0,!1).drawRect(0,0,o.width,o.height).endFill(),s.x=o.width/2,s.scaleY=s.scaleX=0.25*HS.Global.width/o.width,s.snapToPixel=!0,s.cache(0,0,o.width,o.height),s.x=0.6*HS.Global.width,s.y=o.height/2.5,s.regX=o.width/2,s.regY=o.height/2;let C=s.clone();C.x=0.4*HS.Global.width,C.y=HS.Global.height-o.height/2,o=HS.Global.Source.getResult('Background3');let p=new createjs.Shape;p.graphics.beginBitmapFill(o,null,!0,!1).drawRect(0,0,o.width,o.height).endFill(),p.x=o.width/2,p.scaleY=p.scaleX=0.25*HS.Global.width/o.width,p.snapToPixel=!0,p.cache(0,0,o.width,o.height),p.x=HS.Global.width,p.y=o.height/2,p.regX=o.width/2,p.regY=o.height/2;let g=p.clone();g.x=0,g.y=0.85*HS.Global.height,d.addChild(n),d.addChild(c),d.addChild(s),d.addChild(C),d.addChild(p),d.addChild(g),createjs.Ticker.addEventListener('tick',()=>{let b=60/createjs.Ticker.getMeasuredFPS(),H=0.05*b;n.rotation-=H,c.rotation-=H,s.rotation+=H,C.rotation+=H,p.rotation-=H,g.rotation-=H})}function l(){this.opponentBattleArea.removeAllCard(),this.selfBattleArea.removeAllCard(),this.selfHandArea.removeAllCard(),this.opponentHandArea.removeAllCard(),this.opponentBattleArea.relocate(),this.selfBattleArea.relocate(),this.selfHandArea.relocate(),this.opponentHandArea.relocate(),HS.Anime.appear(this.opponentHero,()=>{this.opponentHero.cristal=0}),HS.Anime.appear(this.selfHero,()=>{this.opponentHero.cristal=0})}let d;a.prototype={opponentHandArea:void 0,selfHandArea:void 0,findCard:void 0,clear:void 0},extend(a,createjs.Container),HS.BattleField=a}();this.HS=this.HS||{},function(){function a(){createjs.Container.call(this),this.cards=[];let n=new createjs.Graphics().beginFill('#B39DDB').drawRect(0,0,HS.Global.battleFieldWidth,HS.Global.handAreaHeight),c=new createjs.Shape(n);this.addChild(c)}let o;a.prototype={cards:void 0,addCard:function(n){if(!n instanceof HS.Card)throw HS.Error.TypeError('HS.Card','item');this.addChild(n),this.cards.push(n),n.alpha=0,this.relocate(),HS.Anime.appear(n,()=>{})},removeCard:function(n){let c=-1;for(let s=0;s<this.cards.length;s++)if(this.cards[s].id===n.id)return c=s,this.cards.splice(c,1),this.relocate(),!0;return!1},relocate:function(){for(let n=0;n<this.cards.length;n++)this.cards[n].x=5<=n?HS.Global.handCardDistance*(n+1.5):HS.Global.handCardDistance*n,this.cards[n].y=0},set hero(n){o=n,n.x=5*HS.Global.handCardDistance,n.y=0,this.addChild(n)},removeAllCard:function(){for(let n=0;n<this.cards.length;n++)this.removeChild(this.cards[n]);this.cards.length=0,this.relocate()}},extend(a,createjs.Container),HS.HandArea=a}(),this.HS=this.HS||{},function(){function a(){createjs.Container.call(this),this.cards=[];let n=new createjs.Graphics().beginFill('#D1C4E9').drawRect(0,0,HS.Global.battleFieldWidth,HS.Global.battleAreaHeight),c=new createjs.Shape(n);this.addChild(c)}a.prototype={cards:void 0,addCard:function(n,c){if(!n instanceof HS.Card)throw HS.Error.TypeError('HS.Card','item');this.cards.splice(c,0,n),this.addChild(n),n.alpha=0,this.relocate(),HS.Anime.appear(n,()=>{})},relocate:function(n){if(!n){let p=HS.Global.battleAreaCardDistance*((10-this.cards.length)/2);for(let g=0;g<this.cards.length;g++)this.cards[g].x=p+HS.Global.battleAreaCardDistance*g+10,this.cards[g].y=10;return}let c=HS.Global.battleAreaCardDistance*((10-this.cards.length)/2),s=0,C=c;if(this.cards.length&&(s=this.cards[0].getStageX(),C=this.cards[this.cards.length-1].getStageX()),n>s&&n<C)for(let p=0;p<this.cards.length;p++)n<this.cards[p].getStageX()?(this.cards[p].x=c+HS.Global.battleAreaCardDistance*(p+0.35)+10,this.cards[p].y=10):(this.cards[p].x=c+HS.Global.battleAreaCardDistance*(p-0.35)+10,this.cards[p].y=10);else for(let p=0;p<this.cards.length;p++)this.cards[p].x=c+HS.Global.battleAreaCardDistance*p+10,this.cards[p].y=10},getInsertIndex:function(n){let c=0;for(let s=0;s<this.cards.length&&n>this.cards[s].getStageX();s++)c++;return c},removeCard:function(n){let c=-1;for(let s=0;s<this.cards.length;s++)if(this.cards[s].information.id===n.information.id)return c=s,this.cards.splice(c,1),HS.Anime.disappear(n,()=>{this.removeChild(n)}),this.relocate(),!0;return!1},removeAllCard:function(){for(let n=0;n<this.cards.length;n++)this.removeChild(this.cards[n]);this.cards.length=0,this.relocate()}},extend(a,createjs.Container),HS.BattleArea=a}(),this.HS=this.HS||{},function(){function a(r){createjs.Container.call(this),this.background=new createjs.Shape,this.background.graphics.beginFill(t).drawRoundRect(0,0,HS.Global.buttonWidth,HS.Global.buttonHeight,10);let d=new createjs.Text(r,HS.Global.TextFont,'#fff');d.set({textAlign:'center',x:1.05*(HS.Global.buttonWidth/2),y:0.6*(HS.Global.buttonHeight/2)}),this.textOutLine=new createjs.Text(r,HS.Global.TextFont,'#616161'),this.textOutLine.set({textAlign:'center',x:1.05*(HS.Global.buttonWidth/2),y:0.6*(HS.Global.buttonHeight/2),outline:HS.Global.outline}),this.addChild(this.background),this.addChild(this.textOutLine),this.addChild(d),this.on('mousedown',()=>{this.enable&&this.background.graphics.clear().beginFill(l).drawRoundRect(0,0,HS.Global.buttonWidth,HS.Global.buttonHeight,10)}),this.on('click',()=>{this.enable&&(HS.BGM.buttonClick(),this.background.graphics.clear().beginFill(t).drawRoundRect(0,0,HS.Global.buttonWidth,HS.Global.buttonHeight,10),this._onclick&&this._onclick())}),this.on('mouseout',()=>{this.enable&&this.background.graphics.clear().beginFill(t).drawRoundRect(0,0,HS.Global.buttonWidth,HS.Global.buttonHeight,10)}),this.enable=!0,this.onclick=o=>{this._onclick=o}}let t='#3949AB',l='#3F51B5';a.prototype={set enable(r){this._enable=r,r?(this.textOutLine.color='#20120c',this.background.graphics.clear().beginFill(t).drawRoundRect(0,0,HS.Global.buttonWidth,HS.Global.buttonHeight,10)):(this.textOutLine.color='#616161',this.background.graphics.clear().beginFill(l).drawRoundRect(0,0,HS.Global.buttonWidth,HS.Global.buttonHeight,10))},get enable(){return this._enable}},extend(a,createjs.Container),this.HS.Button=a}();this.HS=this.HS||{},function(){HS.ArrowsManager=function(){let t='#B71C1C',l=new createjs.Shape;l.dash=l.graphics.sd([2,10],0).command,l.graphics.ss(6,'round').s(t),l.start=l.graphics.mt(0,0).command,l.end=l.graphics.lt(100,100).command;let r=new createjs.Shape().set({rotation:45});r.graphics.f(t).drawPolyStar(0,0,20,3);let d;this.handle=(s,C)=>{d=s;let p;d.on('mousedown',g=>{let b=g.target.parent;b instanceof HS.Card&&b.active&&b.assignable&&(o(b.getStageX()+0.55*HS.Global.cardWidth,b.getStageY()+0.55*HS.Global.cardHeight),p=b)}),d.on('pressmove',g=>{let b=g.target.parent;p?n(g.stageX,g.stageY):b instanceof HS.Card&&b.active&&b.assignable&&(o(b.getStageX()+0.55*HS.Global.cardWidth,b.getStageY()+0.55*HS.Global.cardHeight),p=b)}),d.on('pressup',g=>{if(p){c(g.stageX,g.stageY);let b=C.findCard(r);b&&this._onassign(p,b),p=null}}),d.on('mousemove',g=>{p&&n(g.stageX,g.stageY)}),d.on('click',g=>{if(p){c(g.stageX,g.stageY),p=null;let b=C.findCard(r);b&&this._onassign(p,b)}}),createjs.Ticker.on('tick',()=>{p&&l.dash.offset++}),this.setArrow=g=>{p=g}};let o=(s,C)=>{l.start.x=l.end.x=s,l.start.y=l.end.y=C,n(s,C),d.addChild(l,r)},n=(s,C)=>{r.x=l.end.x=s,r.y=l.end.y=C;let p=l.end.x-l.start.x,g=l.end.y-l.start.y;r.rotation=180*Math.atan2(g,p)/Math.PI},c=()=>{d.removeChild(l,r)};this.onassign=s=>{this._onassign=s}}}(),this.HS=this.HS||{},function(){function a(){createjs.Container.call(this),o=this;let c=new createjs.Shape;c.graphics.beginFill('#1A237E'),c.alpha=1,c.graphics.drawRoundRect(0,0,HS.Global.alertWidth,HS.Global.alertHeight,10),c.graphics.endFill();let s=new createjs.Shape;s.graphics.beginFill('#7986CB'),s.alpha=1,s.graphics.drawRoundRect(0.01*HS.Global.alertWidth,0.02*HS.Global.alertHeight,0.98*HS.Global.alertWidth,0.96*HS.Global.alertHeight,10),s.graphics.endFill();let C=HS.Global.alertWidth/2,p=HS.Global.alertHeight/2;this.messageText=new createjs.Text('',HS.Global.TextFontVeryLarge,'#FFF'),this.messageText.set({textAlign:'center',textBaseline:'middle',x:C,y:p}),this.messageOutline=new createjs.Text('',HS.Global.TextFontVeryLarge,'#20120c'),this.messageOutline.set({textAlign:'center',textBaseline:'middle',x:C,y:p,outline:HS.Global.outline}),this.x=HS.Global.width/2-HS.Global.alertWidth/2,this.y=HS.Global.height/2-HS.Global.alertHeight/2,this.addChild(c),this.addChild(s),this.addChild(this.messageOutline),this.addChild(this.messageText),this.alpha=0,this.addMessage=addMessage}function t(){createjs.Container.call(this);let c=new createjs.Shape;c.graphics.beginFill('#1A237E'),c.alpha=1,c.graphics.drawRoundRect(0,0,HS.Global.alertWidth,HS.Global.alertHeight,10),c.graphics.endFill();let s=new createjs.Shape;s.graphics.beginFill('#7986CB'),s.alpha=1,s.graphics.drawRoundRect(0.01*HS.Global.alertWidth,0.02*HS.Global.alertHeight,0.98*HS.Global.alertWidth,0.96*HS.Global.alertHeight,10),s.graphics.endFill();let C=HS.Global.alertWidth/2,p=HS.Global.alertHeight/2;this.messageText=new createjs.Text('123',HS.Global.TextFontVeryLarge,'#FFF'),this.messageText.set({textAlign:'center',textBaseline:'middle',x:C,y:p}),this.messageText=new createjs.Container,this.messageOutline=new createjs.Text('123',HS.Global.TextFontVeryLarge,'#20120c'),this.messageOutline.set({textAlign:'center',textBaseline:'middle',x:C,y:p,outline:HS.Global.outline}),this.x=HS.Global.width/2-HS.Global.alertWidth/2,this.y=HS.Global.height/2-HS.Global.alertHeight/2,this.addChild(c),this.addChild(s),this.addChild(this.messageText),this.alpha=0,this.false=!0,this.show=g=>{this.messageText.removeAllChildren();let b=HS.Global.alertWidth/2-0.05*HS.Global.alertWidth*(g.length/2);for(let S,u=0;u<g.length;u++){S=new createjs.Container,S.set({x:b+0.05*HS.Global.alertWidth*(u+0.5),y:0.5*HS.Global.alertHeight});let A=new createjs.Text(g.charAt(u),HS.Global.TextFontVeryLarge,'#fff');A.set({textAlign:'center',textBaseline:'middle',outline:!1});let T=new createjs.Text(g.charAt(u),HS.Global.TextFontVeryLarge,'#20120c');T.set({textAlign:'center',textBaseline:'middle',outline:HS.Global.outline}),S.addChild(T,A),this.messageText.addChild(S)}let H=0;createjs.Ticker.addEventListener('tick',()=>{H=(H+5)%360;let S=H;this.messageText.children.forEach(A=>{S=(S+=330)%360;let T=0.5+0.03*Math.cos(0.017453293*S);A.y=HS.Global.alertHeight*T})}),this.visible=!0,HS.BGM.message(),createjs.Tween.get(this).to({alpha:0.8},300)},this.hide=()=>{createjs.Tween.get(this).to({alpha:0,visible:!1},300)}}function l(c){o.messageText.text=c,o.messageOutline.text=c,HS.BGM.alert(),createjs.Tween.get(o).to({alpha:1},300).wait(1200).to({alpha:0},300).call(r)}function r(){if(d.length){let c=d[0];d.splice(0,1),l(c)}else n=null}let d=[],o,n;addMessage=c=>{d.push(c),n||(n=setTimeout(()=>r(),0))},extend(a,createjs.Container),extend(t,createjs.Container),HS.AlertBox=new a,HS.Alert=HS.AlertBox.addMessage,HS.MessageBox=new t}();this.HS=this.HS||{},function(){HS.BGM=new function(){let t=1,l;this.start=()=>{this.play('sound2')},this.handleComplete=()=>{t=Math.floor(9*Math.random()+1),this.play('sound'+t)},this.play=d=>{l=createjs.Sound.play(d),l.on('complete',this.handleComplete,this),l.volume=0.3},this.buttonClick=()=>{l=createjs.Sound.play('buttonClick'),l.volume=1},this.alert=()=>{l=createjs.Sound.play('alert'),l.volume=0.7},this.message=()=>{createjs.Sound.play('message')},this.attack=()=>{createjs.Sound.play('attack')},this.play=d=>{createjs.Sound.play(d)}}}(),this.HS=this.HS||{},function(){createjs.MotionGuidePlugin.install(),HS.Anime=new function(){this.attack=(t,l,r)=>{if(!t instanceof HS.Card)throw new HS.Error.TypeError('attacker','HS.Card');if(!l instanceof HS.Card)throw new HS.Error.TypeError('defensor','HS.Card');let d=t.localToGlobal(t.x,t.y),o=l.localToGlobal(l.x,l.y),n=d.x-o.x,c=d.y-o.y,s=t.globalToLocal(-n+d.x,-c+d.y);t.toTop(),createjs.Tween.get(t,{override:!0}).to({x:t.x,y:0.5*s.y},100).to({x:s.x,y:s.y},50).call(HS.BGM.attack).to({x:t.x,y:t.y},150).call(r)},this.disappear=(t,l)=>{if(!t instanceof HS.Card)throw new HS.Error.TypeError('attacker','HS.Card');createjs.Tween.get(t,{override:!0}).to({alpha:0},300).call(l)},this.appear=(t,l)=>{if(!t instanceof HS.Card)throw new HS.Error.TypeError('attacker','HS.Card');createjs.Tween.get(t,{override:!0}).to({alpha:1},700).call(l)},this.itemAttack=(t,l,r,d)=>{if(r=new HS.ImagePackage(r),!t instanceof HS.Card)throw new HS.Error.TypeError('attacker','HS.Card');if(!l instanceof HS.Card)throw new HS.Error.TypeError('defensor','HS.Card');let o=t.localToGlobal(0,0),n=l.localToGlobal(0,0);r.set({x:o.x+HS.Global.cardWidth/4,y:o.y+HS.Global.cardHeight/4}),r.visibel=!0,t.stage.addChild(r);let c=o.x-n.x,s=o.y-n.y,C={x:-c+o.x,y:-s+o.y};createjs.Tween.get(r,{override:!0}).to({x:C.x+HS.Global.cardWidth/4,y:C.y+HS.Global.cardHeight/4},300).wait(150).call(()=>{HS.BGM.play('explosion'),r.stage.removeChild(r)}).call(d)}}}(),this.HS=this.HS||{},function(){function a(){function r(s,C,p){let g=HS.Global.Source.getResult(C.cover);g?(g.scaleX=g.width/HS.Global.deckWidth,g.scaleY=g.height/HS.Global.deckWidth,s.graphics.clear().beginBitmapFill(g,'no-repeat',new createjs.Matrix2D(g.scaleX,0,0,g.scaleY,-g.width/2*g.scaleX,-g.height/2*g.scaleY)).drawCircle(0,0,HS.Global.deckWidth*p)):s.graphics.clear().beginFill('orange').drawCircle(0,0,HS.Global.deckWidth)}createjs.Container.call(this);var d=new createjs.Shape;d.alpha=0.99;let o=0.35;var n=new createjs.Shape;n.graphics.beginFill('#000').drawCircle(0,0,0.9*HS.Global.deckWidth),n.x=1.3*HS.Global.deckWidth,n.alpha=o,n.addEventListener('click',()=>this.change(this.getNextIndex()));var c=new createjs.Shape;c.graphics.beginFill('#FFF').drawCircle(0,0,0.9*HS.Global.deckWidth),c.x=1.3*-HS.Global.deckWidth,c.alpha=o,c.addEventListener('click',()=>this.change(this.getPreviousIndex())),this.deckText=new createjs.Text('',HS.Global.TextFontVeryLarge,'#FFF'),this.deckText.set({textAlign:'center',x:0*HS.Global.deckWidth,y:0.9*HS.Global.deckHeight}),this.deckTextOutline=new createjs.Text('',HS.Global.TextFontVeryLarge,'#20120c'),this.deckTextOutline.set({textAlign:'center',x:0*HS.Global.deckWidth,y:0.9*HS.Global.deckHeight,outline:HS.Global.outline}),this.deckTextNext=new createjs.Text('',HS.Global.TextFontLarge,'#FFF'),this.deckTextNext.set({textAlign:'center',x:1.3*HS.Global.deckWidth,y:0.9*HS.Global.deckHeight,alpha:o}),this.deckTextNextOutline=new createjs.Text('',HS.Global.TextFontLarge,'#20120c'),this.deckTextNextOutline.set({textAlign:'center',x:1.3*HS.Global.deckWidth,y:0.9*HS.Global.deckHeight,outline:HS.Global.outline,alpha:o}),this.deckTextPrevious=new createjs.Text('',HS.Global.TextFontLarge,'#FFF'),this.deckTextPrevious.set({textAlign:'center',x:-1.3*HS.Global.deckWidth,y:0.9*HS.Global.deckHeight,alpha:o}),this.deckTextPreviousOutline=new createjs.Text('',HS.Global.TextFontLarge,'#20120c'),this.deckTextPreviousOutline.set({textAlign:'center',x:-1.3*HS.Global.deckWidth,y:0.9*HS.Global.deckHeight,outline:HS.Global.outline,alpha:o}),this.addChild(n),this.addChild(c),this.addChild(d),this.addChild(this.deckTextOutline),this.addChild(this.deckText),this.addChild(this.deckTextNextOutline),this.addChild(this.deckTextNext),this.addChild(this.deckTextPreviousOutline),this.addChild(this.deckTextPrevious),this.change=s=>{l=s,this.deckText.text=this.deckTextOutline.text=t[l].name,this.deckTextPrevious.text=this.deckTextPreviousOutline.text=t[this.getPreviousIndex()].name,this.deckTextNext.text=this.deckTextNextOutline.text=t[this.getNextIndex()].name,r(n,t[this.getNextIndex()],1),r(c,t[this.getPreviousIndex()],1),r(d,t[l],1.2)},this.getNextIndex=()=>{return(l+1)%t.length},this.getPreviousIndex=()=>{return 0>l-1?t.length-1:l-1},this.change(0),this.getSelected=()=>{return t[l]}}let t=[{id:1,name:'\u9810\u8A2D\u724C\u7D441',cover:'DeckCover0'},{id:2,name:'\u9810\u8A2D\u724C\u7D442',cover:'DeckCover1'}],l=0;extend(a,createjs.Container),HS.Deck=a}();this.HS=this.HS||{},function(){function a(t){createjs.Shape.call(this),this.graphics.clear().beginBitmapFill(t,'no-repeat').drawRect(0,0,t.width,t.height),this.scaleX=HS.Global.imagePackageWidth/t.width,this.scaleY=HS.Global.imagePackageHeight/t.height}extend(a,createjs.Shape),HS.ImagePackage=a}(),this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardAhri',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Ahri=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardAnnie',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Annie=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardAshe',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Ashe=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardAzir',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Azir=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardBlitzcrank',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Blitzcrank=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardBraum',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Braum=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardCaitlyn',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Caitlyn=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardCamille',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Camille=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardCCLin',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.CCLin=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardCPH',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.CPH=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardDaMing',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.DaMing=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardDarius',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Darius=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardDyMing',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.DyMing=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardFlower',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Flower=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardGAYA',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.GAYA=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardHaru',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Haru=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardHauShiang',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.HauShiang=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardJan',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Jan=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardJianAn',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.JianAn=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardJiungHan',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.JiungHan=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardJustin',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Justin=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardKuo',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Kuo=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardLily',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Lily=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardLiWei',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.LiWei=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardMaple',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Maple=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardPoo',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Poo=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardWinTingLee',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.WinTingLee=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardYee',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Yee=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardYo',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.Yo=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardYYT',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.YYT=a}();this.HS=this.HS||{},this.HS.Action=this.HS.Action||{},function(){function a(){}a.prototype={id:null,type:null,msg:null,obj:null,player:null,from:null,to:null};HS.Action.Action=a,HS.Action.Type={Setting:0,Drainage:1,Discard:2,Endturn:3,Battlefield:4,Attack:5,Heropower:11,Hero:7,Dual:8,Start:9,Disconnect:10,EndGame:6,battleCry:12}}(),this.HS=this.HS||{},this.HS.Action=this.HS.Action||{},function(){function a(t){HS.Action.Action.call(this),this.type=HS.Action.Type.Dual,this.obj={hero:'WinTingLee',deckID:t}}a.prototype={},extend(a,HS.Action.Action),HS.Action.Dual=a}();this.HS=this.HS||{},this.HS.Action=this.HS.Action||{},function(){function a(){HS.Action.Action.call(this),this.type=HS.Action.Type.Endturn}a.prototype={},extend(a,HS.Action.Action),HS.Action.EndTurn=a}();this.HS=this.HS||{},this.HS.Action=this.HS.Action||{},function(){function a(t,l){HS.Action.Action.call(this),this.type=HS.Action.Type.Discard,this.obj={cardID:t,position:l}}a.prototype={},extend(a,HS.Action.Action),HS.Action.PlayCard=a}();this.HS=this.HS||{},this.HS.Action=this.HS.Action||{},function(){function a(t,l){HS.Action.Action.call(this),this.type=HS.Action.Type.Attack,this.from=t,this.to=l}a.prototype={},extend(a,HS.Action.Action),HS.Action.Attack=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardSticker')}a.prototype={},extend(a,HS.Card),HS.Card.TinLee=a}();this.HS=this.HS||{},this.HS.Card=this.HS.Card||{},function(){function a(t){HS.Card.call(this,t,'CardCCLin',new createjs.Matrix2D(1,0,0,1,20,0))}a.prototype={},extend(a,HS.Card),HS.Card.CCLin=a}();this.HS=this.HS||{},this.HS.Error=this.HS.Error||{},function(){this.HS.Error.TypeError=function(t,l){return new TypeError(l+' is not instance of '+t)}}(),this.HS=this.HS||{},function(){function a(){this.create=(l,r)=>{return t[l]?new t[l].class(r):new HS.Card(r)}}let t={阿璃:{name:'\u963F\u7483',class:HS.Card.Ahri},安妮:{name:'\u5B89\u59AE',class:HS.Card.Annie},艾希:{name:'\u827E\u5E0C',class:HS.Card.Ashe},阿祈爾:{name:'\u963F\u7948\u723E',class:HS.Card.Azir},布里茨:{name:'\u5E03\u91CC\u8328',class:HS.Card.Blitzcrank},布郎姆:{name:'\u5E03\u90CE\u59C6',class:HS.Card.Braum},凱特琳:{name:'\u51F1\u7279\u7433',class:HS.Card.Caitlyn},卡蜜兒:{name:'\u5361\u871C\u5152',class:HS.Card.Camille},哲正:{name:'\u54F2\u6B63',class:HS.Card.CCLin},CPH:{name:'CPH',class:HS.Card.CPH},高師許大銘:{name:'\u9AD8\u5E2B\u8A31\u5927\u9298',class:HS.Card.DaMing},達瑞斯:{name:'\u9054\u745E\u65AF',class:HS.Card.Darius},葉師傅:{name:'\u8449\u5E2B\u5085',class:HS.Card.DyMing},花花:{name:'\u82B1\u82B1',class:HS.Card.Flower},師哥:{name:'\u5E2B\u54E5',class:HS.Card.GAYA},Haru:{name:'Haru',class:HS.Card.Haru},浩翔:{name:'\u6D69\u7FD4',class:HS.Card.HauShiang},小詹:{name:'\u5C0F\u8A79',class:HS.Card.Jan},建安:{name:'\u5EFA\u5B89',class:HS.Card.JianAn},煞氣a屁孩:{name:'\u715E\u6C23a\u5C41\u5B69',class:HS.Card.JiungHan},爆肝王:{name:'\u7206\u809D\u738B',class:HS.Card.Justin},家旭:{name:'\u5BB6\u65ED',class:HS.Card.Kuo},oo黑魔導oo:{name:'oo\u9ED1\u9B54\u5C0Eoo',class:HS.Card.Lily},立偉:{name:'\u7ACB\u5049',class:HS.Card.LiWei},張晉:{name:'\u5F35\u6649',class:HS.Card.Maple},大便:{name:'\u5927\u4FBF',class:HS.Card.Poo},溫聽力:{name:'\u6EAB\u807D\u529B',class:HS.Card.WinTingLee},文義:{name:'\u6587\u7FA9',class:HS.Card.Yee},Yo:{name:'Yo',class:HS.Card.Yo},遠澤:{name:'\u9060\u6FA4',class:HS.Card.YYT}};extend(a,createjs.Shape),HS.CardFactory=new a}();